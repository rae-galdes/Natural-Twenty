<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Natural Twenty</title>
  <link rel="icon" href="NaturalTwentyFav.png" type="image/png">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&amp;family=Crimson+Text:ital,wght@0,400;0,600;1,400&amp;family=Orbitron:wght@400;600;700;900&amp;family=Rajdhani:wght@300;400;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    
    #app-container {
      width: 100%;
      height: 100%;
      overflow-y: auto;
      overflow-x: hidden;
    }
    
    /* Game Menu Styles */
    .game-bg {
      background: linear-gradient(135deg, #1a1412 0%, #2d2319 25%, #1f1a15 50%, #2a211a 75%, #1a1412 100%);
      position: relative;
    }
    
    .game-bg::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: 
        radial-gradient(circle at 20% 50%, rgba(201, 169, 89, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 80% 50%, rgba(139, 115, 85, 0.08) 0%, transparent 50%);
      animation: bgPulse 8s ease-in-out infinite;
    }
    
    @keyframes bgPulse {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 0.8; }
    }
    
    .game-bg::after {
      content: '';
      position: absolute;
      inset: 0;
      background-image: 
        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"><defs><filter id="noise"><feTurbulence baseFrequency="0.9" numOctaves="4"/><feColorMatrix values="0 0 0 0 0.5 0 0 0 0 0.3 0 0 0 0 0.2 0 0 0 0.15 0"/></filter></defs><rect width="400" height="400" filter="url(%23noise)"/></svg>');
      opacity: 0.1;
      pointer-events: none;
    }
    
    .menu-container {
      position: relative;
      z-index: 1;
    }
    
    .logo-glow {
      filter: drop-shadow(0 0 20px rgba(201, 169, 89, 0.6)) 
              drop-shadow(0 0 40px rgba(201, 169, 89, 0.4))
              drop-shadow(0 0 60px rgba(201, 169, 89, 0.2));
    }
    
    .menu-item {
      background: linear-gradient(145deg, rgba(45, 35, 25, 0.9), rgba(30, 25, 20, 0.95));
      border: 2px solid rgba(139, 115, 85, 0.5);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3);
    }
    
    .menu-item::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(201, 169, 89, 0.15), rgba(139, 115, 85, 0.15));
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .menu-item:hover {
      border-color: rgba(201, 169, 89, 0.8);
      transform: translateX(10px);
      box-shadow: 0 0 25px rgba(201, 169, 89, 0.4), 
                  0 0 50px rgba(201, 169, 89, 0.2),
                  inset 0 0 20px rgba(201, 169, 89, 0.15);
    }
    
    .menu-item:hover::before {
      opacity: 1;
    }
    
    .menu-item:active {
      transform: translateX(5px) scale(0.98);
    }
    
    .menu-icon {
      transition: all 0.3s ease;
    }
    
    .menu-item:hover .menu-icon {
      transform: scale(1.2) rotate(5deg);
      filter: drop-shadow(0 0 10px rgba(201, 169, 89, 0.8));
    }
    
    .menu-text {
      position: relative;
      z-index: 1;
    }

    .scroll-to-top {
      position: fixed;
      right: 1.5rem;
      bottom: 1.5rem;
      width: 3rem;
      height: 3rem;
      border-radius: 9999px;
      border: 2px solid rgba(139, 115, 85, 0.7);
      background: linear-gradient(145deg, rgba(45, 35, 25, 0.95), rgba(30, 25, 20, 0.98));
      color: rgba(201, 169, 89, 0.95);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.35),
                  inset 0 0 18px rgba(201, 169, 89, 0.2);
      opacity: 0;
      pointer-events: none;
      transform: translateY(10px);
      transition: opacity 0.3s ease, transform 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
      z-index: 60;
    }

    .scroll-to-top.is-visible {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }

    .scroll-to-top:hover {
      border-color: rgba(201, 169, 89, 0.9);
      box-shadow: 0 0 20px rgba(201, 169, 89, 0.35),
                  0 0 40px rgba(201, 169, 89, 0.2),
                  inset 0 0 18px rgba(201, 169, 89, 0.3);
    }
    
    .scanline {
      position: absolute;
      inset: 0;
      background: linear-gradient(
        to bottom,
        transparent 0%,
        rgba(201, 169, 89, 0.08) 50%,
        transparent 100%
      );
      animation: scan 3s linear infinite;
      pointer-events: none;
      opacity: 0.3;
    }
    
    @keyframes scan {
      0% { transform: translateY(-100%); }
      100% { transform: translateY(100%); }
    }
    
    .pixel-corner {
      position: absolute;
      width: 20px;
      height: 20px;
      border: 2px solid;
    }
    
    .corner-tl {
      top: -2px;
      left: -2px;
      border-right: none;
      border-bottom: none;
      border-color: rgba(201, 169, 89, 0.6);
    }
    
    .corner-tr {
      top: -2px;
      right: -2px;
      border-left: none;
      border-bottom: none;
      border-color: rgba(201, 169, 89, 0.6);
    }
    
    .corner-bl {
      bottom: -2px;
      left: -2px;
      border-right: none;
      border-top: none;
      border-color: rgba(201, 169, 89, 0.6);
    }
    
    .corner-br {
      bottom: -2px;
      right: -2px;
      border-left: none;
      border-top: none;
      border-color: rgba(201, 169, 89, 0.6);
    }
    
    .title-glow {
      text-shadow: 0 0 20px rgba(201, 169, 89, 0.8),
                   0 0 40px rgba(201, 169, 89, 0.5),
                   0 0 60px rgba(201, 169, 89, 0.3);
      animation: titlePulse 2s ease-in-out infinite;
    }
    
    @keyframes titlePulse {
      0%, 100% { 
        text-shadow: 0 0 20px rgba(201, 169, 89, 0.8),
                     0 0 40px rgba(201, 169, 89, 0.5),
                     0 0 60px rgba(201, 169, 89, 0.3);
      }
      50% { 
        text-shadow: 0 0 30px rgba(201, 169, 89, 1),
                     0 0 60px rgba(201, 169, 89, 0.7),
                     0 0 90px rgba(201, 169, 89, 0.5);
      }
    }
    
    .locked-indicator {
      animation: lockPulse 2s ease-in-out infinite;
    }
    
    @keyframes lockPulse {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 1; }
    }
    
    .glitch {
      position: relative;
      animation: glitchSkew 3s infinite;
    }
    
    @keyframes glitchSkew {
      0%, 100% { transform: skew(0deg); }
      20% { transform: skew(-0.5deg); }
      40% { transform: skew(0.5deg); }
      60% { transform: skew(-0.3deg); }
      80% { transform: skew(0.3deg); }
    }
    
    .back-btn-menu {
      background: linear-gradient(135deg, rgba(139, 115, 85, 0.4), rgba(92, 74, 58, 0.4));
      border: 2px solid rgba(139, 115, 85, 0.6);
      transition: all 0.3s ease;
    }
    
    .back-btn-menu:hover {
      background: linear-gradient(135deg, rgba(201, 169, 89, 0.5), rgba(139, 115, 85, 0.5));
      border-color: rgba(201, 169, 89, 0.8);
      box-shadow: 0 0 20px rgba(201, 169, 89, 0.6);
      transform: scale(1.05);
    }
    
    /* Before the Dice Styles */
    
    * {
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><g transform="rotate(135 16 16)"><polygon points="16,2 18,6 14,6" fill="%23c9a959"/><polygon points="14,6 18,6 17,8 15,8" fill="%23a08060"/><rect x="15" y="8" width="2" height="18" fill="%238b7355"/><rect x="15.3" y="9" width="1.4" height="16" fill="%23d4b76a" opacity="0.6"/><path d="M13 26 L16 30 L19 26 Z" fill="%235c4a3a"/><rect x="14" y="24" width="4" height="3" fill="%236b5a4a" opacity="0.7"/></g></svg>') 3 3, auto;
    }
    
    button, a, input, textarea, select, [onclick], .nav-dot, .menu-item, .dice-button {
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><g transform="rotate(135 16 16)"><polygon points="16,2 18,6 14,6" fill="%23ff0000"/><polygon points="14,6 18,6 17,8 15,8" fill="%23cc0000"/><rect x="15" y="8" width="2" height="18" fill="%23990000"/><rect x="15.3" y="9" width="1.4" height="16" fill="%23ff3333" opacity="0.6"/><path d="M13 26 L16 30 L19 26 Z" fill="%23660000"/><rect x="14" y="24" width="4" height="3" fill="%23880000" opacity="0.7"/></g></svg>') 3 3, pointer;
    }
    
    .font-title-dice {
      font-family: 'Cinzel', Georgia, serif;
      letter-spacing: 0.03em;
    }
    
    .font-body-dice {
      font-family: 'Crimson Text', Georgia, serif;
      letter-spacing: 0.01em;
    }
    
    .font-title-menu {
      font-family: 'Orbitron', sans-serif;
      letter-spacing: 0.1em;
    }
    
    .font-body-menu {
      font-family: 'Rajdhani', sans-serif;
    }
    
    .parchment-bg {
      background: linear-gradient(135deg, #1a1412 0%, #2d2319 25%, #1f1a15 50%, #2a211a 75%, #1a1412 100%);
      position: relative;
    }
    
    .parchment-bg::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: 
        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"><defs><filter id="noise"><feTurbulence baseFrequency="0.9" numOctaves="4"/><feColorMatrix values="0 0 0 0 0.5 0 0 0 0 0.3 0 0 0 0 0.2 0 0 0 0.15 0"/></filter></defs><rect width="400" height="400" filter="url(%23noise)"/></svg>');
      opacity: 0.1;
      pointer-events: none;
    }
    
    .section-card {
      background: linear-gradient(145deg, rgba(45, 35, 25, 0.95), rgba(30, 25, 20, 0.98));
      border: 2px solid #8b7355;
      box-shadow: 0 0 20px rgba(139, 115, 85, 0.3), inset 0 0 30px rgba(0, 0, 0, 0.4);
    }
    
    .input-field {
      background: rgba(20, 15, 12, 0.8);
      border: 1px solid #5c4a3a;
      transition: all 0.3s ease;
      position: relative;
    }
    
    .input-field option {
      background: #2d2319;
      color: #fef3c7;
    }
    
    .input-field option:hover {
      background: linear-gradient(135deg, #c9a959, #d4b76a);
      color: #1a1412;
      font-weight: 600;
    }
    
    .input-field option:checked {
      background: linear-gradient(135deg, #8b7355, #a08060);
      color: #fef3c7;
      font-weight: 600;
    }
    
    .input-field:focus {
      border-color: #c9a959;
      box-shadow: 0 0 20px rgba(201, 169, 89, 0.6), 0 0 40px rgba(201, 169, 89, 0.3), inset 0 0 15px rgba(201, 169, 89, 0.2);
      outline: none;
      animation: magicalPulse 2s ease-in-out infinite;
    }
    
    @keyframes magicalPulse {
      0%, 100% { box-shadow: 0 0 20px rgba(201, 169, 89, 0.6), 0 0 40px rgba(201, 169, 89, 0.3), inset 0 0 15px rgba(201, 169, 89, 0.2); }
      50% { box-shadow: 0 0 25px rgba(201, 169, 89, 0.8), 0 0 50px rgba(201, 169, 89, 0.4), inset 0 0 20px rgba(201, 169, 89, 0.3); }
    }
    
    .input-field::placeholder {
      color: #6b5a4a;
      font-style: italic;
    }
    
    .question-number {
      background: linear-gradient(135deg, #8b7355, #a08060);
      min-width: 28px;
      height: 28px;
      transition: all 0.3s ease;
    }
    
    .question-number:hover {
      box-shadow: 0 0 15px rgba(201, 169, 89, 0.6);
      transform: rotate(360deg);
    }
    
    .ornament {
      background: linear-gradient(90deg, transparent, #8b7355, transparent);
      height: 2px;
    }
    
    .nav-dot {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .nav-dot.active {
      background: #c9a959;
      transform: scale(1.5);
      box-shadow: 0 0 15px rgba(201, 169, 89, 0.8), 0 0 25px rgba(201, 169, 89, 0.4);
      animation: dotPulse 2s ease-in-out infinite;
    }
    
    @keyframes dotPulse {
      0%, 100% { box-shadow: 0 0 15px rgba(201, 169, 89, 0.8), 0 0 25px rgba(201, 169, 89, 0.4); }
      50% { box-shadow: 0 0 20px rgba(201, 169, 89, 1), 0 0 35px rgba(201, 169, 89, 0.6); }
    }
    
    .nav-dot.completed {
      background: #8b7355;
    }
    
    .scroll-indicator {
      animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-8px); }
      60% { transform: translateY(-4px); }
    }
    
    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(50px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-50px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    .slide-in-right {
      animation: slideInRight 0.5s ease-out;
    }
    
    .slide-in-left {
      animation: slideInLeft 0.5s ease-out;
    }
    
    .glow-border {
      position: relative;
    }
    
    .glow-border::before {
      content: '';
      position: absolute;
      inset: -2px;
      background: linear-gradient(45deg, #c9a959, #8b7355, #c9a959);
      border-radius: inherit;
      z-index: -1;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .glow-border:focus-within::before {
      opacity: 1;
    }
    
    .category-header {
      background: linear-gradient(90deg, transparent 0%, rgba(139, 115, 85, 0.3) 20%, rgba(139, 115, 85, 0.3) 80%, transparent 100%);
      border-top: 1px solid #8b7355;
      border-bottom: 1px solid #8b7355;
    }
    
    .progress-fill {
      background: linear-gradient(90deg, #8b7355, #c9a959);
      transition: width 0.5s ease;
    }
    
    .nav-btn {
      background: linear-gradient(135deg, #8b7355 0%, #a08060 50%, #8b7355 100%);
      transition: all 0.3s ease;
    }
    
    .nav-btn:hover:not(:disabled) {
      background: linear-gradient(135deg, #a08060 0%, #c9a959 50%, #a08060 100%);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(201, 169, 89, 0.4), 0 0 30px rgba(201, 169, 89, 0.3);
      animation: sparkle 1.5s ease-in-out infinite;
    }
    
    @keyframes sparkle {
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.2) drop-shadow(0 0 8px rgba(201, 169, 89, 0.8)); }
    }
    
    .nav-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .dice-button.spinning {
      animation: spinDice 0.6s ease-in-out;
    }
    
    @keyframes spinDice {
      0% { transform: rotate(0deg) scale(1); }
      50% { transform: rotate(180deg) scale(1.2); }
      100% { transform: rotate(360deg) scale(1); }
    }
    
    .submit-btn {
      background: linear-gradient(135deg, #8b7355 0%, #a08060 50%, #8b7355 100%);
      transition: all 0.3s ease;
    }
    
    .submit-btn:hover {
      background: linear-gradient(135deg, #a08060 0%, #c9a959 50%, #a08060 100%);
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 8px 20px rgba(201, 169, 89, 0.4), 0 0 30px rgba(201, 169, 89, 0.3);
      animation: sparkle 1.5s ease-in-out infinite;
    }
    
    textarea::-webkit-scrollbar {
      width: 8px;
    }
    
    textarea::-webkit-scrollbar-track {
      background: rgba(20, 15, 12, 0.5);
      border-radius: 4px;
    }
    
    textarea::-webkit-scrollbar-thumb {
      background: #5c4a3a;
      border-radius: 4px;
    }
    
    textarea::-webkit-scrollbar-thumb:hover {
      background: #8b7355;
    }
    
    .section-hidden {
      display: none;
    }
    
    .category-locked {
      position: relative;
    }
    
    .category-locked .category-questions {
      display: none;
    }
    
    .category-locked .category-header-title {
      cursor: help;
      position: relative;
    }
    
    .category-locked .category-header-title::after {
      content: 'üîí Answer at least one question above to unlock';
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      margin-top: 8px;
      background: rgba(139, 115, 85, 0.98);
      padding: 8px 16px;
      border-radius: 6px;
      font-size: 11px;
      color: #fef3c7;
      font-weight: 600;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5), 0 0 20px rgba(201, 169, 89, 0.4);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease, transform 0.4s ease;
      transform: translateY(-15px) scale(0.8);
      z-index: 10;
      white-space: nowrap;
    }
    
    .category-locked .category-header-title:hover::after {
      opacity: 1;
      transform: translateY(0) scale(1);
      animation: magicalSparkle 0.6s ease-out;
    }
    
    @keyframes magicalSparkle {
      0% {
        opacity: 0;
        transform: translateY(-15px) scale(0.8) rotate(-5deg);
        filter: blur(3px) brightness(0.5);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5), 0 0 20px rgba(201, 169, 89, 0.4);
      }
      30% {
        filter: blur(1px) brightness(1.3);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5), 0 0 30px rgba(201, 169, 89, 0.8), 0 0 40px rgba(201, 169, 89, 0.4);
      }
      60% {
        filter: blur(0px) brightness(1.1);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5), 0 0 25px rgba(201, 169, 89, 0.6);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1) rotate(0deg);
        filter: blur(0px) brightness(1);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5), 0 0 20px rgba(201, 169, 89, 0.4);
      }
    }
    
    .character-subtitle {
      color: #c9a959;
      font-size: 1.25rem;
      font-weight: 600;
      letter-spacing: 0.1em;
      margin-bottom: 0.75rem;
      opacity: 0;
      transition: opacity 0.5s ease-in;
    }
    
    .character-subtitle.visible {
      opacity: 1;
    }
    
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      animation: fadeIn 0.3s ease-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .modal-content {
      animation: scaleIn 0.3s ease-out;
    }
    
    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    
    @media print {
      body {
        background: #f4e8d0 !important;
      }
      
      .no-print {
        display: none !important;
      }
      
      .summary-page {
        max-width: 100% !important;
        margin: 0 !important;
        padding: 20px !important;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app-container" class="w-full h-full"><!-- Home Menu Screen -->
   <div id="home-screen" class="min-h-full w-full game-bg font-body-menu">
    <div class="min-h-full w-full flex items-center justify-center p-4 md:p-8 menu-container">
     <div class="w-full max-w-3xl"><!-- Logo and Title -->
      <div class="text-center mb-6 md:mb-8">
       <div class="flex justify-center mb-3">
        <svg class="w-16 h-16 md:w-20 md:h-20 logo-glow" viewbox="0 0 100 100" fill="#c9a959"><circle cx="50" cy="10" r="1.5" fill="currentColor" /> <circle cx="50" cy="25" r="1" fill="currentColor" /> <circle cx="75" cy="32" r="1" fill="currentColor" /> <circle cx="68" cy="52" r="1" fill="currentColor" /> <circle cx="32" cy="52" r="1" fill="currentColor" /> <circle cx="25" cy="32" r="1" fill="currentColor" /> <circle cx="82" cy="50" r="1" fill="currentColor" /> <circle cx="70" cy="70" r="1" fill="currentColor" /> <circle cx="50" cy="75" r="1" fill="currentColor" /> <circle cx="30" cy="70" r="1" fill="currentColor" /> <circle cx="18" cy="50" r="1" fill="currentColor" /> <circle cx="50" cy="90" r="1.5" fill="currentColor" /> <line x1="50" y1="10" x2="50" y2="25" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="75" y2="32" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="68" y2="52" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="32" y2="52" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="25" y2="32" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="25" x2="75" y2="32" stroke="currentColor" stroke-width="1.5" /> <line x1="75" y1="32" x2="68" y2="52" stroke="currentColor" stroke-width="1.5" /> <line x1="68" y1="52" x2="32" y2="52" stroke="currentColor" stroke-width="1.5" /> <line x1="32" y1="52" x2="25" y2="32" stroke="currentColor" stroke-width="1.5" /> <line x1="25" y1="32" x2="50" y2="25" stroke="currentColor" stroke-width="1.5" /> <polygon points="50,10 50,25 75,32" fill="currentColor" opacity="0.3" /> <polygon points="50,25 75,32 68,52" fill="currentColor" opacity="0.25" /> <polygon points="50,25 68,52 50,60" fill="currentColor" opacity="0.4" /> <polygon points="50,25 50,60 32,52" fill="currentColor" opacity="0.35" /> <polygon points="50,25 32,52 25,32" fill="currentColor" opacity="0.3" /> <polygon points="68,52 82,50 70,70" fill="currentColor" opacity="0.2" /> <polygon points="68,52 70,70 50,75" fill="currentColor" opacity="0.45" /> <polygon points="32,52 50,75 30,70" fill="currentColor" opacity="0.4" /> <polygon points="32,52 30,70 18,50" fill="currentColor" opacity="0.25" /> <polygon points="50,75 70,70 50,90" fill="currentColor" opacity="0.3" /> <polygon points="50,75 50,90 30,70" fill="currentColor" opacity="0.35" /> <circle cx="50" cy="50" r="2" fill="currentColor" opacity="0.6" /> <line x1="50" y1="25" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="68" y1="52" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="32" y1="52" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="50" y1="75" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" />
        </svg>
       </div>
       <h1 class="font-title-dice text-4xl md:text-5xl font-black text-amber-400 title-glow mb-2">NATURAL TWENTY</h1>
       <p class="text-amber-500/70 text-xs md:text-sm font-body-dice italic tracking-wide">Where legends begin, before fate rolls the dice</p>
      </div><!-- Menu Items -->
      <nav class="grid grid-cols-1 md:grid-cols-2 gap-3 relative max-w-xl mx-auto"><!-- Before the Dice --> <button onclick="startBeforeDice()" class="menu-item text-center rounded-xl p-4 group relative overflow-hidden">
        <div class="flex flex-col items-center gap-2">
         <div class="menu-icon">
          <svg class="w-10 h-10" viewbox="0 0 100 100" fill="#c9a959"><circle cx="50" cy="10" r="1.5" fill="currentColor" /> <circle cx="50" cy="25" r="1" fill="currentColor" /> <circle cx="75" cy="32" r="1" fill="currentColor" /> <circle cx="68" cy="52" r="1" fill="currentColor" /> <circle cx="32" cy="52" r="1" fill="currentColor" /> <circle cx="25" cy="32" r="1" fill="currentColor" /> <circle cx="82" cy="50" r="1" fill="currentColor" /> <circle cx="70" cy="70" r="1" fill="currentColor" /> <circle cx="50" cy="75" r="1" fill="currentColor" /> <circle cx="30" cy="70" r="1" fill="currentColor" /> <circle cx="18" cy="50" r="1" fill="currentColor" /> <circle cx="50" cy="90" r="1.5" fill="currentColor" /> <line x1="50" y1="10" x2="50" y2="25" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="75" y2="32" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="68" y2="52" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="32" y2="52" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="25" y2="32" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="25" x2="75" y2="32" stroke="currentColor" stroke-width="1.5" /> <line x1="75" y1="32" x2="68" y2="52" stroke="currentColor" stroke-width="1.5" /> <line x1="68" y1="52" x2="32" y2="52" stroke="currentColor" stroke-width="1.5" /> <line x1="32" y1="52" x2="25" y2="32" stroke="currentColor" stroke-width="1.5" /> <line x1="25" y1="32" x2="50" y2="25" stroke="currentColor" stroke-width="1.5" /> <polygon points="50,10 50,25 75,32" fill="currentColor" opacity="0.3" /> <polygon points="50,25 75,32 68,52" fill="currentColor" opacity="0.25" /> <polygon points="50,25 68,52 50,60" fill="currentColor" opacity="0.4" /> <polygon points="50,25 50,60 32,52" fill="currentColor" opacity="0.35" /> <polygon points="50,25 32,52 25,32" fill="currentColor" opacity="0.3" /> <polygon points="68,52 82,50 70,70" fill="currentColor" opacity="0.2" /> <polygon points="68,52 70,70 50,75" fill="currentColor" opacity="0.45" /> <polygon points="32,52 50,75 30,70" fill="currentColor" opacity="0.4" /> <polygon points="32,52 30,70 18,50" fill="currentColor" opacity="0.25" /> <polygon points="50,75 70,70 50,90" fill="currentColor" opacity="0.3" /> <polygon points="50,75 50,90 30,70" fill="currentColor" opacity="0.35" /> <circle cx="50" cy="50" r="2" fill="currentColor" opacity="0.6" /> <line x1="50" y1="25" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="68" y1="52" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="32" y1="52" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="50" y1="75" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" />
          </svg>
         </div>
         <div>
          <h2 class="font-title-dice text-base font-bold text-amber-300 menu-text mb-0.5 tracking-wide">Before the Dice</h2>
          <p class="text-amber-500/80 text-xs font-body-dice">Character Creation</p>
         </div>
        </div></button> <!-- Beyond --> <button onclick="showComingSoon('Beyond')" class="menu-item text-center rounded-xl p-4 group relative overflow-hidden">
        <div class="flex flex-col items-center gap-2">
         <div class="menu-icon">
          <svg class="w-10 h-10" viewbox="0 0 100 100" fill="#c9a959"><!-- Open book pages --> <path d="M 20 30 Q 20 25 25 25 L 48 25 L 48 75 L 25 75 Q 20 75 20 70 Z" fill="currentColor" opacity="0.3" /> <path d="M 52 25 L 75 25 Q 80 25 80 30 L 80 70 Q 80 75 75 75 L 52 75 Z" fill="currentColor" opacity="0.3" /> <!-- Book spine --> <line x1="50" y1="25" x2="50" y2="75" stroke="currentColor" stroke-width="2" /> <!-- Page lines left --> <line x1="28" y1="35" x2="42" y2="35" stroke="currentColor" stroke-width="1" opacity="0.5" /> <line x1="28" y1="42" x2="42" y2="42" stroke="currentColor" stroke-width="1" opacity="0.5" /> <line x1="28" y1="49" x2="42" y2="49" stroke="currentColor" stroke-width="1" opacity="0.5" /> <line x1="28" y1="56" x2="42" y2="56" stroke="currentColor" stroke-width="1" opacity="0.5" /> <line x1="28" y1="63" x2="42" y2="63" stroke="currentColor" stroke-width="1" opacity="0.5" /> <!-- Page lines right --> <line x1="58" y1="35" x2="72" y2="35" stroke="currentColor" stroke-width="1" opacity="0.5" /> <line x1="58" y1="42" x2="72" y2="42" stroke="currentColor" stroke-width="1" opacity="0.5" /> <line x1="58" y1="49" x2="72" y2="49" stroke="currentColor" stroke-width="1" opacity="0.5" /> <line x1="58" y1="56" x2="72" y2="56" stroke="currentColor" stroke-width="1" opacity="0.5" /> <line x1="58" y1="63" x2="72" y2="63" stroke="currentColor" stroke-width="1" opacity="0.5" /> <!-- Magical sparkles --> <circle cx="15" cy="20" r="1.5" fill="currentColor" /> <circle cx="85" cy="22" r="1" fill="currentColor" /> <circle cx="12" cy="80" r="1" fill="currentColor" /> <circle cx="88" cy="78" r="1.5" fill="currentColor" />
          </svg>
         </div>
         <div>
          <h2 class="font-title-dice text-base font-bold text-amber-300 menu-text mb-0.5 tracking-wide">Beyond</h2>
          <p class="text-amber-500/80 text-xs font-body-dice">Character Archives</p>
         </div>
        </div>
        <div class="locked-indicator absolute top-2 right-2 text-amber-600/60 text-lg">
         üîí
        </div></button> <!-- Lore --> <button onclick="showComingSoon('Lore')" class="menu-item text-center rounded-xl p-4 group relative overflow-hidden">
        <div class="flex flex-col items-center gap-2">
         <div class="menu-icon">
          <svg class="w-10 h-10" viewbox="0 0 100 100" fill="#c9a959"><!-- Scroll body --> <rect x="30" y="25" width="40" height="50" rx="2" fill="currentColor" opacity="0.3" /> <!-- Top scroll rod --> <rect x="25" y="22" width="50" height="5" rx="2" fill="currentColor" /> <circle cx="27" cy="24.5" r="2" fill="currentColor" /> <circle cx="73" cy="24.5" r="2" fill="currentColor" /> <!-- Bottom scroll rod --> <rect x="25" y="73" width="50" height="5" rx="2" fill="currentColor" /> <circle cx="27" cy="75.5" r="2" fill="currentColor" /> <circle cx="73" cy="75.5" r="2" fill="currentColor" /> <!-- Text lines --> <line x1="38" y1="35" x2="62" y2="35" stroke="currentColor" stroke-width="1.5" opacity="0.6" /> <line x1="38" y1="42" x2="62" y2="42" stroke="currentColor" stroke-width="1.5" opacity="0.6" /> <line x1="38" y1="49" x2="62" y2="49" stroke="currentColor" stroke-width="1.5" opacity="0.6" /> <line x1="38" y1="56" x2="58" y2="56" stroke="currentColor" stroke-width="1.5" opacity="0.6" /> <line x1="38" y1="63" x2="62" y2="63" stroke="currentColor" stroke-width="1.5" opacity="0.6" /> <!-- Decorative runes --> <circle cx="50" cy="32" r="1" fill="currentColor" opacity="0.8" /> <circle cx="50" cy="68" r="1" fill="currentColor" opacity="0.8" />
          </svg>
         </div>
         <div>
          <h2 class="font-title-dice text-base font-bold text-amber-300 menu-text mb-0.5 tracking-wide">Lore</h2>
          <p class="text-amber-500/80 text-xs font-body-dice">Campaign History</p>
         </div>
        </div>
        <div class="locked-indicator absolute top-2 right-2 text-amber-600/60 text-lg">
         üîí
        </div></button> <!-- Music --> <button onclick="showComingSoon('Music')" class="menu-item text-center rounded-xl p-4 group relative overflow-hidden">
        <div class="flex flex-col items-center gap-2">
         <div class="menu-icon">
          <svg class="w-10 h-10" viewbox="0 0 100 100" fill="#c9a959"><!-- Lute/harp body --> <ellipse cx="50" cy="60" rx="18" ry="22" fill="currentColor" opacity="0.3" /> <path d="M 32 60 Q 32 52 38 48 L 38 62 Q 32 58 32 60" fill="currentColor" opacity="0.5" /> <!-- Strings --> <line x1="44" y1="25" x2="44" y2="70" stroke="currentColor" stroke-width="1.5" opacity="0.6" /> <line x1="48" y1="22" x2="48" y2="72" stroke="currentColor" stroke-width="1.5" opacity="0.6" /> <line x1="52" y1="22" x2="52" y2="72" stroke="currentColor" stroke-width="1.5" opacity="0.6" /> <line x1="56" y1="25" x2="56" y2="70" stroke="currentColor" stroke-width="1.5" opacity="0.6" /> <!-- Neck --> <rect x="46" y="15" width="8" height="15" fill="currentColor" /> <!-- Tuning pegs --> <circle cx="43" cy="18" r="2" fill="currentColor" /> <circle cx="50" cy="15" r="2" fill="currentColor" /> <circle cx="57" cy="18" r="2" fill="currentColor" /> <!-- Musical notes floating --> <circle cx="70" cy="35" r="2.5" fill="currentColor" /> <line x1="72.5" y1="35" x2="72.5" y2="25" stroke="currentColor" stroke-width="1.5" /> <circle cx="78" cy="42" r="2" fill="currentColor" /> <line x1="80" y1="42" x2="80" y2="34" stroke="currentColor" stroke-width="1.5" /> <circle cx="25" cy="40" r="1.5" fill="currentColor" /> <line x1="26.5" y1="40" x2="26.5" y2="33" stroke="currentColor" stroke-width="1" />
          </svg>
         </div>
         <div>
          <h2 class="font-title-dice text-base font-bold text-amber-300 menu-text mb-0.5 tracking-wide">Music</h2>
          <p class="text-amber-500/80 text-xs font-body-dice">Ambient Soundscapes</p>
         </div>
        </div>
        <div class="locked-indicator absolute top-2 right-2 text-amber-600/60 text-lg">
         üîí
        </div></button>
       <div class="scanline"></div>
      </nav><!-- Version Info -->
      <div class="text-center mt-6 md:mt-8">
       <div class="ornament w-24 mx-auto mb-2"></div>
       <p class="text-amber-600/40 text-xs font-body-dice italic">¬© Rae Galdes - DM</p>
      </div>
     </div>
    </div>
   </div><!-- Coming Soon Modal -->
   <div id="coming-soon-modal" class="hidden modal-overlay">
    <div class="modal-content text-center px-4">
     <div class="section-card rounded-2xl p-8 md:p-12 border-2 border-amber-700 max-w-md relative">
      <div class="pixel-corner corner-tl"></div>
      <div class="pixel-corner corner-tr"></div>
      <div class="pixel-corner corner-bl"></div>
      <div class="pixel-corner corner-br"></div>
      <div class="text-6xl md:text-7xl mb-6">
       üîí
      </div>
      <h2 id="coming-soon-title" class="font-title-dice text-3xl md:text-4xl font-bold text-amber-400 mb-4">Coming Soon</h2>
      <p id="coming-soon-message" class="text-amber-200/80 text-base md:text-lg mb-8 font-body-dice">This feature is currently under development</p><button onclick="hideComingSoon()" class="nav-btn font-title-dice font-bold text-amber-950 px-8 py-3 rounded-lg tracking-wide uppercase"> Back to Menu </button>
     </div>
    </div>
   </div><!-- Before the Dice Activity Screen -->
   <div id="before-dice-screen" class="min-h-full w-full hidden font-body-dice parchment-bg text-amber-100">
    <div class="min-h-full w-full"><!-- Header -->
     <header class="sticky top-0 z-50 parchment-bg border-b border-amber-900/50 backdrop-blur-sm">
      <div class="max-w-4xl mx-auto px-4 py-3">
       <div class="flex items-center justify-between"><button onclick="returnToHome()" class="flex items-center gap-2 text-amber-600 hover:text-amber-400 transition-colors font-title-dice tracking-wide"> <span class="text-xl">‚Üê</span> <span class="text-sm">Back to Menu</span> </button>
        <div class="flex items-center gap-2">
         <svg class="w-8 h-8 text-amber-600" viewbox="0 0 100 100" fill="currentColor"><circle cx="50" cy="10" r="1.5" fill="currentColor" /> <circle cx="50" cy="25" r="1" fill="currentColor" /> <circle cx="75" cy="32" r="1" fill="currentColor" /> <circle cx="68" cy="52" r="1" fill="currentColor" /> <circle cx="32" cy="52" r="1" fill="currentColor" /> <circle cx="25" cy="32" r="1" fill="currentColor" /> <circle cx="82" cy="50" r="1" fill="currentColor" /> <circle cx="70" cy="70" r="1" fill="currentColor" /> <circle cx="50" cy="75" r="1" fill="currentColor" /> <circle cx="30" cy="70" r="1" fill="currentColor" /> <circle cx="18" cy="50" r="1" fill="currentColor" /> <circle cx="50" cy="90" r="1.5" fill="currentColor" /> <line x1="50" y1="10" x2="50" y2="25" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="75" y2="32" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="68" y2="52" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="32" y2="52" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="25" y2="32" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="25" x2="75" y2="32" stroke="currentColor" stroke-width="1.5" /> <line x1="75" y1="32" x2="68" y2="52" stroke="currentColor" stroke-width="1.5" /> <line x1="68" y1="52" x2="32" y2="52" stroke="currentColor" stroke-width="1.5" /> <line x1="32" y1="52" x2="25" y2="32" stroke="currentColor" stroke-width="1.5" /> <line x1="25" y1="32" x2="50" y2="25" stroke="currentColor" stroke-width="1.5" /> <polygon points="50,10 50,25 75,32" fill="currentColor" opacity="0.3" /> <polygon points="50,25 75,32 68,52" fill="currentColor" opacity="0.25" /> <polygon points="50,25 68,52 50,60" fill="currentColor" opacity="0.4" /> <polygon points="50,25 50,60 32,52" fill="currentColor" opacity="0.35" /> <polygon points="50,25 32,52 25,32" fill="currentColor" opacity="0.3" /> <polygon points="68,52 82,50 70,70" fill="currentColor" opacity="0.2" /> <polygon points="68,52 70,70 50,75" fill="currentColor" opacity="0.45" /> <polygon points="32,52 50,75 30,70" fill="currentColor" opacity="0.4" /> <polygon points="32,52 30,70 18,50" fill="currentColor" opacity="0.25" /> <polygon points="50,75 70,70 50,90" fill="currentColor" opacity="0.3" /> <polygon points="50,75 50,90 30,70" fill="currentColor" opacity="0.35" /> <circle cx="50" cy="50" r="2" fill="currentColor" opacity="0.6" /> <line x1="50" y1="25" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="68" y1="52" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="32" y1="52" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="50" y1="75" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" />
         </svg>
         <div>
          <h1 class="font-title-dice text-lg md:text-xl font-bold text-amber-400 tracking-wide">Before the Dice</h1>
          <p class="text-xs text-amber-600/80 font-title-dice tracking-widest uppercase">Forge Your Legend</p>
         </div>
        </div>
        <div class="text-right hidden sm:block"><span class="text-xs text-amber-500" id="progress-text">0% Complete</span>
         <div class="w-32 h-2 bg-amber-950/50 rounded-full mt-1 overflow-hidden">
          <div id="progress-bar" class="h-full progress-fill rounded-full" style="width: 0%"></div>
         </div>
        </div>
       </div>
      </div>
     </header><!-- Main Content -->
     <main class="max-w-4xl mx-auto px-4 py-8"><!-- Introduction -->
      <div class="text-center mb-8">
       <p class="text-sm text-amber-600/70 max-w-lg mx-auto leading-relaxed italic">The following questions are designed to help you explore your character in more depth. After Session 1, you are welcome to update your responses if anything doesn't feel quite right in play.</p>
       <div class="ornament w-32 mx-auto mt-3"></div>
      </div><!-- Section Progress Indicator -->
      <div class="flex items-center justify-center gap-3 mb-8">
       <div class="flex items-center gap-2"><button type="button" onclick="navigateToSection(1)" class="nav-dot w-3 h-3 rounded-full bg-amber-800/50 hover:bg-amber-600 transition-all" data-section-dot="1"></button> <button type="button" onclick="navigateToSection(2)" class="nav-dot w-3 h-3 rounded-full bg-amber-800/50 hover:bg-amber-600 transition-all" data-section-dot="2"></button> <button type="button" onclick="navigateToSection(3)" class="nav-dot w-3 h-3 rounded-full bg-amber-800/50 hover:bg-amber-600 transition-all" data-section-dot="3"></button>
       </div><span class="text-amber-500 text-sm font-title-dice ml-2">Section <span id="current-section-number">1</span> of 3</span>
      </div>
      <form id="character-form" class="space-y-8"><!-- Section 1: Details -->
       <section id="section-1" class="section-card rounded-lg overflow-hidden" data-section="1">
        <div id="character-subtitle-1" class="character-subtitle text-center pt-6 font-title-dice"></div>
        <div class="category-header px-6 py-3">
         <h2 class="font-title-dice text-xl font-bold text-amber-400 tracking-wide flex items-center gap-3 justify-center"><span class="text-2xl">üó°Ô∏è</span> Section 1: Details</h2>
        </div>
        <div class="p-6 space-y-5">
         <div class="grid md:grid-cols-2 gap-5">
          <div class="glow-border rounded-lg"><label class="block text-amber-400 font-semibold mb-2 text-sm tracking-wide uppercase">Your Name</label> <input type="text" name="player_name" class="input-field w-full px-4 py-3 rounded-lg text-amber-100" placeholder="Enter your real name..." data-track data-section-input="1" required>
          </div>
          <div class="glow-border rounded-lg"><label class="block text-amber-400 font-semibold mb-2 text-sm tracking-wide uppercase">Character Name</label>
           <div class="flex gap-2"><input type="text" name="character_name" id="character_name" class="input-field flex-1 px-4 py-3 rounded-lg text-amber-100" placeholder="What shall they call you?" data-track data-section-input="1" required> <button type="button" onclick="generateRandomName()" id="dice-btn" class="dice-button nav-btn w-12 h-12 rounded-lg flex items-center justify-center hover:rotate-[360deg] transition-all duration-500" title="Roll for a random name">
             <svg class="w-7 h-7 text-amber-950" viewbox="0 0 100 100" fill="currentColor"><circle cx="50" cy="10" r="1.5" fill="currentColor" /> <circle cx="50" cy="25" r="1" fill="currentColor" /> <circle cx="75" cy="32" r="1" fill="currentColor" /> <circle cx="68" cy="52" r="1" fill="currentColor" /> <circle cx="32" cy="52" r="1" fill="currentColor" /> <circle cx="25" cy="32" r="1" fill="currentColor" /> <circle cx="82" cy="50" r="1" fill="currentColor" /> <circle cx="70" cy="70" r="1" fill="currentColor" /> <circle cx="50" cy="75" r="1" fill="currentColor" /> <circle cx="30" cy="70" r="1" fill="currentColor" /> <circle cx="18" cy="50" r="1" fill="currentColor" /> <circle cx="50" cy="90" r="1.5" fill="currentColor" /> <line x1="50" y1="10" x2="50" y2="25" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="75" y2="32" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="68" y2="52" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="32" y2="52" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="25" y2="32" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="25" x2="75" y2="32" stroke="currentColor" stroke-width="1.5" /> <line x1="75" y1="32" x2="68" y2="52" stroke="currentColor" stroke-width="1.5" /> <line x1="68" y1="52" x2="32" y2="52" stroke="currentColor" stroke-width="1.5" /> <line x1="32" y1="52" x2="25" y2="32" stroke="currentColor" stroke-width="1.5" /> <line x1="25" y1="32" x2="50" y2="25" stroke="currentColor" stroke-width="1.5" /> <polygon points="50,10 50,25 75,32" fill="currentColor" opacity="0.3" /> <polygon points="50,25 75,32 68,52" fill="currentColor" opacity="0.25" /> <polygon points="50,25 68,52 50,60" fill="currentColor" opacity="0.4" /> <polygon points="50,25 50,60 32,52" fill="currentColor" opacity="0.35" /> <polygon points="50,25 32,52 25,32" fill="currentColor" opacity="0.3" /> <polygon points="68,52 82,50 70,70" fill="currentColor" opacity="0.2" /> <polygon points="68,52 70,70 50,75" fill="currentColor" opacity="0.45" /> <polygon points="32,52 50,75 30,70" fill="currentColor" opacity="0.4" /> <polygon points="32,52 30,70 18,50" fill="currentColor" opacity="0.25" /> <polygon points="50,75 70,70 50,90" fill="currentColor" opacity="0.3" /> <polygon points="50,75 50,90 30,70" fill="currentColor" opacity="0.35" /> <circle cx="50" cy="50" r="2" fill="currentColor" opacity="0.6" /> <line x1="50" y1="25" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="68" y1="52" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="32" y1="52" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="50" y1="75" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" />
             </svg></button>
           </div>
          </div>
         </div>
         <div class="grid md:grid-cols-3 gap-5">
          <div class="glow-border rounded-lg"><label class="block text-amber-400 font-semibold mb-2 text-sm tracking-wide uppercase">Character Race</label> <select name="character_race" id="character_race" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 cursor-pointer" data-track data-section-input="1" required> <option value="">Select Race...</option> <option value="aasimar">Aasimar</option> <option value="changeling">Changeling</option> <option value="dragonborn">Dragonborn</option> <option value="dwarf">Dwarf</option> <option value="elf">Elf</option> <option value="fairy">Fairy</option> <option value="genasi">Genasi</option> <option value="githyanki">Githyanki</option> <option value="gnome">Gnome</option> <option value="halfling">Halfling</option> <option value="human">Human</option> <option value="orc">Orc</option> <option value="tiefling">Tiefling</option> </select>
           <div id="race-comment" class="mt-3 text-amber-500/90 text-sm italic font-body-dice leading-relaxed min-h-[20px]"></div>
          </div>
          <div class="glow-border rounded-lg"><label class="block text-amber-400 font-semibold mb-2 text-sm tracking-wide uppercase">Character Class</label> <select name="character_class" id="character_class" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 cursor-pointer" data-track data-section-input="1" required> <option value="">Select Class...</option> <option value="artificer">Artificer</option> <option value="barbarian">Barbarian</option> <option value="bard">Bard</option> <option value="cleric">Cleric</option> <option value="druid">Druid</option> <option value="fighter">Fighter</option> <option value="monk">Monk</option> <option value="paladin">Paladin</option> <option value="ranger">Ranger</option> <option value="rogue">Rogue</option> <option value="sorcerer">Sorcerer</option> <option value="warlock">Warlock</option> <option value="wizard">Wizard</option> </select>
           <div id="class-comment" class="mt-3 text-amber-500/90 text-sm italic font-body-dice leading-relaxed min-h-[20px]"></div>
          </div>
          <div class="glow-border rounded-lg"><label class="block text-amber-400 font-semibold mb-2 text-sm tracking-wide uppercase">Character Age</label> <input type="number" name="character_age" id="character_age" min="1" max="1000" class="input-field w-full px-4 py-3 rounded-lg text-amber-100" placeholder="Years lived..." data-track data-section-input="1" pattern="[0-9]*" inputmode="numeric" required>
           <div id="age-comment" class="mt-3 text-amber-500/90 text-sm italic font-body-dice leading-relaxed min-h-[20px]"></div>
          </div>
         </div>
        </div><!-- Navigation Buttons -->
        <div class="flex justify-end gap-4 px-6 pb-6"><button type="button" onclick="nextSection()" class="nav-btn font-title-dice font-bold text-amber-950 px-8 py-3 rounded-lg tracking-wide uppercase"> Continue to Backstory ‚Üí </button>
        </div>
       </section><!-- Section 2: Backstory -->
       <section id="section-2" class="section-card rounded-lg overflow-hidden section-hidden" data-section="2">
        <div id="character-subtitle-2" class="character-subtitle text-center pt-6 font-title-dice"></div>
        <div class="category-header px-6 py-3">
         <h2 class="font-title-dice text-xl font-bold text-amber-400 tracking-wide flex items-center gap-3 justify-center"><span class="text-2xl">üìú</span> Section 2: Backstory</h2>
        </div>
        <div class="p-6 space-y-6">
         <div>
          <div class="flex items-start gap-3 mb-3"><span class="question-number rounded-full flex items-center justify-center text-sm font-bold text-amber-950">1</span> <label class="text-amber-300 font-semibold">Where You Came From</label> <button type="button" onclick="generateRandomOrigin()" class="dice-button nav-btn w-10 h-10 rounded-lg flex items-center justify-center hover:rotate-[360deg] transition-all duration-500 ml-auto" title="Roll for a random origin">
            <svg class="w-6 h-6 text-amber-950" viewbox="0 0 100 100" fill="currentColor"><circle cx="50" cy="10" r="1.5" fill="currentColor" /> <circle cx="50" cy="25" r="1" fill="currentColor" /> <circle cx="75" cy="32" r="1" fill="currentColor" /> <circle cx="68" cy="52" r="1" fill="currentColor" /> <circle cx="32" cy="52" r="1" fill="currentColor" /> <circle cx="25" cy="32" r="1" fill="currentColor" /> <circle cx="82" cy="50" r="1" fill="currentColor" /> <circle cx="70" cy="70" r="1" fill="currentColor" /> <circle cx="50" cy="75" r="1" fill="currentColor" /> <circle cx="30" cy="70" r="1" fill="currentColor" /> <circle cx="18" cy="50" r="1" fill="currentColor" /> <circle cx="50" cy="90" r="1.5" fill="currentColor" /> <line x1="50" y1="10" x2="50" y2="25" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="75" y2="32" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="68" y2="52" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="32" y2="52" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="25" y2="32" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="25" x2="75" y2="32" stroke="currentColor" stroke-width="1.5" /> <line x1="75" y1="32" x2="68" y2="52" stroke="currentColor" stroke-width="1.5" /> <line x1="68" y1="52" x2="32" y2="52" stroke="currentColor" stroke-width="1.5" /> <line x1="32" y1="52" x2="25" y2="32" stroke="currentColor" stroke-width="1.5" /> <line x1="25" y1="32" x2="50" y2="25" stroke="currentColor" stroke-width="1.5" /> <polygon points="50,10 50,25 75,32" fill="currentColor" opacity="0.3" /> <polygon points="50,25 75,32 68,52" fill="currentColor" opacity="0.25" /> <polygon points="50,25 68,52 50,60" fill="currentColor" opacity="0.4" /> <polygon points="50,25 50,60 32,52" fill="currentColor" opacity="0.35" /> <polygon points="50,25 32,52 25,32" fill="currentColor" opacity="0.3" /> <polygon points="68,52 82,50 70,70" fill="currentColor" opacity="0.2" /> <polygon points="68,52 70,70 50,75" fill="currentColor" opacity="0.45" /> <polygon points="32,52 50,75 30,70" fill="currentColor" opacity="0.4" /> <polygon points="32,52 30,70 18,50" fill="currentColor" opacity="0.25" /> <polygon points="50,75 70,70 50,90" fill="currentColor" opacity="0.3" /> <polygon points="50,75 50,90 30,70" fill="currentColor" opacity="0.35" /> <circle cx="50" cy="50" r="2" fill="currentColor" opacity="0.6" /> <line x1="50" y1="25" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="68" y1="52" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="32" y1="52" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="50" y1="75" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" />
            </svg></button>
          </div>
          <p class="text-amber-200/70 text-sm mb-3 ml-10">Describe the place you grew up or spent most of your life. Who did you spend it with? What was "normal" for you there, and what never felt right?</p><textarea name="backstory_origin" id="backstory_origin" rows="4" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none" placeholder="Paint the picture of your origins..." data-track data-section-input="2" required></textarea>
         </div>
         <div>
          <div class="flex items-start gap-3 mb-3"><span class="question-number rounded-full flex items-center justify-center text-sm font-bold text-amber-950">2</span> <label class="text-amber-300 font-semibold">Significant Events</label> <button type="button" onclick="showNiceMessage(2)" class="dice-button nav-btn w-10 h-10 rounded-lg flex items-center justify-center hover:rotate-[360deg] transition-all duration-500 ml-auto" title="Try to randomize">
            <svg class="w-6 h-6 text-amber-950" viewbox="0 0 100 100" fill="currentColor"><circle cx="50" cy="10" r="1.5" fill="currentColor" /> <circle cx="50" cy="25" r="1" fill="currentColor" /> <circle cx="75" cy="32" r="1" fill="currentColor" /> <circle cx="68" cy="52" r="1" fill="currentColor" /> <circle cx="32" cy="52" r="1" fill="currentColor" /> <circle cx="25" cy="32" r="1" fill="currentColor" /> <circle cx="82" cy="50" r="1" fill="currentColor" /> <circle cx="70" cy="70" r="1" fill="currentColor" /> <circle cx="50" cy="75" r="1" fill="currentColor" /> <circle cx="30" cy="70" r="1" fill="currentColor" /> <circle cx="18" cy="50" r="1" fill="currentColor" /> <circle cx="50" cy="90" r="1.5" fill="currentColor" /> <line x1="50" y1="10" x2="50" y2="25" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="75" y2="32" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="68" y2="52" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="32" y2="52" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="25" y2="32" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="25" x2="75" y2="32" stroke="currentColor" stroke-width="1.5" /> <line x1="75" y1="32" x2="68" y2="52" stroke="currentColor" stroke-width="1.5" /> <line x1="68" y1="52" x2="32" y2="52" stroke="currentColor" stroke-width="1.5" /> <line x1="32" y1="52" x2="25" y2="32" stroke="currentColor" stroke-width="1.5" /> <line x1="25" y1="32" x2="50" y2="25" stroke="currentColor" stroke-width="1.5" /> <polygon points="50,10 50,25 75,32" fill="currentColor" opacity="0.3" /> <polygon points="50,25 75,32 68,52" fill="currentColor" opacity="0.25" /> <polygon points="50,25 68,52 50,60" fill="currentColor" opacity="0.4" /> <polygon points="50,25 50,60 32,52" fill="currentColor" opacity="0.35" /> <polygon points="50,25 32,52 25,32" fill="currentColor" opacity="0.3" /> <polygon points="68,52 82,50 70,70" fill="currentColor" opacity="0.2" /> <polygon points="68,52 70,70 50,75" fill="currentColor" opacity="0.45" /> <polygon points="32,52 50,75 30,70" fill="currentColor" opacity="0.4" /> <polygon points="32,52 30,70 18,50" fill="currentColor" opacity="0.25" /> <polygon points="50,75 70,70 50,90" fill="currentColor" opacity="0.3" /> <polygon points="50,75 50,90 30,70" fill="currentColor" opacity="0.35" /> <circle cx="50" cy="50" r="2" fill="currentColor" opacity="0.6" /> <line x1="50" y1="25" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="68" y1="52" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="32" y1="52" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="50" y1="75" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" />
            </svg></button>
          </div>
          <p class="text-amber-200/70 text-sm mb-3 ml-10">Describe at least one event, relationship, or period that left a lasting mark on you. What did it change about how you see yourself and the world?</p><textarea name="backstory_events" rows="4" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none" placeholder="What moments shaped you?" data-track data-section-input="2" required></textarea>
         </div>
         <div>
          <div class="flex items-start gap-3 mb-3"><span class="question-number rounded-full flex items-center justify-center text-sm font-bold text-amber-950">3</span> <label class="text-amber-300 font-semibold">Where You Were Before This</label> <button type="button" onclick="showNiceMessage(3)" class="dice-button nav-btn w-10 h-10 rounded-lg flex items-center justify-center hover:rotate-[360deg] transition-all duration-500 ml-auto" title="Try to randomize">
            <svg class="w-6 h-6 text-amber-950" viewbox="0 0 100 100" fill="currentColor"><circle cx="50" cy="10" r="1.5" fill="currentColor" /> <circle cx="50" cy="25" r="1" fill="currentColor" /> <circle cx="75" cy="32" r="1" fill="currentColor" /> <circle cx="68" cy="52" r="1" fill="currentColor" /> <circle cx="32" cy="52" r="1" fill="currentColor" /> <circle cx="25" cy="32" r="1" fill="currentColor" /> <circle cx="82" cy="50" r="1" fill="currentColor" /> <circle cx="70" cy="70" r="1" fill="currentColor" /> <circle cx="50" cy="75" r="1" fill="currentColor" /> <circle cx="30" cy="70" r="1" fill="currentColor" /> <circle cx="18" cy="50" r="1" fill="currentColor" /> <circle cx="50" cy="90" r="1.5" fill="currentColor" /> <line x1="50" y1="10" x2="50" y2="25" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="75" y2="32" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="68" y2="52" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="32" y2="52" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="25" y2="32" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="25" x2="75" y2="32" stroke="currentColor" stroke-width="1.5" /> <line x1="75" y1="32" x2="68" y2="52" stroke="currentColor" stroke-width="1.5" /> <line x1="68" y1="52" x2="32" y2="52" stroke="currentColor" stroke-width="1.5" /> <line x1="32" y1="52" x2="25" y2="32" stroke="currentColor" stroke-width="1.5" /> <line x1="25" y1="32" x2="50" y2="25" stroke="currentColor" stroke-width="1.5" /> <polygon points="50,10 50,25 75,32" fill="currentColor" opacity="0.3" /> <polygon points="50,25 75,32 68,52" fill="currentColor" opacity="0.25" /> <polygon points="50,25 68,52 50,60" fill="currentColor" opacity="0.4" /> <polygon points="50,25 50,60 32,52" fill="currentColor" opacity="0.35" /> <polygon points="50,25 32,52 25,32" fill="currentColor" opacity="0.3" /> <polygon points="68,52 82,50 70,70" fill="currentColor" opacity="0.2" /> <polygon points="68,52 70,70 50,75" fill="currentColor" opacity="0.45" /> <polygon points="32,52 50,75 30,70" fill="currentColor" opacity="0.4" /> <polygon points="32,52 30,70 18,50" fill="currentColor" opacity="0.25" /> <polygon points="50,75 70,70 50,90" fill="currentColor" opacity="0.3" /> <polygon points="50,75 50,90 30,70" fill="currentColor" opacity="0.35" /> <circle cx="50" cy="50" r="2" fill="currentColor" opacity="0.6" /> <line x1="50" y1="25" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="68" y1="52" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="32" y1="52" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="50" y1="75" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" />
            </svg></button>
          </div>
          <p class="text-amber-200/70 text-sm mb-3 ml-10">Describe your life in the days/weeks immediately before the campaign begins. What were you holding together, avoiding, or quietly enduring?</p><textarea name="backstory_recent" rows="4" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none" placeholder="Where does your story pick up?" data-track data-section-input="2" required></textarea>
         </div>
         <div>
          <div class="flex items-start gap-3 mb-3"><span class="question-number rounded-full flex items-center justify-center text-sm font-bold text-amber-950">4</span> <label class="text-amber-300 font-semibold">Your Surface Personality</label> <button type="button" onclick="showNiceMessage(4)" class="dice-button nav-btn w-10 h-10 rounded-lg flex items-center justify-center hover:rotate-[360deg] transition-all duration-500 ml-auto" title="Try to randomize">
            <svg class="w-6 h-6 text-amber-950" viewbox="0 0 100 100" fill="currentColor"><circle cx="50" cy="10" r="1.5" fill="currentColor" /> <circle cx="50" cy="25" r="1" fill="currentColor" /> <circle cx="75" cy="32" r="1" fill="currentColor" /> <circle cx="68" cy="52" r="1" fill="currentColor" /> <circle cx="32" cy="52" r="1" fill="currentColor" /> <circle cx="25" cy="32" r="1" fill="currentColor" /> <circle cx="82" cy="50" r="1" fill="currentColor" /> <circle cx="70" cy="70" r="1" fill="currentColor" /> <circle cx="50" cy="75" r="1" fill="currentColor" /> <circle cx="30" cy="70" r="1" fill="currentColor" /> <circle cx="18" cy="50" r="1" fill="currentColor" /> <circle cx="50" cy="90" r="1.5" fill="currentColor" /> <line x1="50" y1="10" x2="50" y2="25" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="75" y2="32" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="68" y2="52" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="32" y2="52" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="10" x2="25" y2="32" stroke="currentColor" stroke-width="2" /> <line x1="50" y1="25" x2="75" y2="32" stroke="currentColor" stroke-width="1.5" /> <line x1="75" y1="32" x2="68" y2="52" stroke="currentColor" stroke-width="1.5" /> <line x1="68" y1="52" x2="32" y2="52" stroke="currentColor" stroke-width="1.5" /> <line x1="32" y1="52" x2="25" y2="32" stroke="currentColor" stroke-width="1.5" /> <line x1="25" y1="32" x2="50" y2="25" stroke="currentColor" stroke-width="1.5" /> <polygon points="50,10 50,25 75,32" fill="currentColor" opacity="0.3" /> <polygon points="50,25 75,32 68,52" fill="currentColor" opacity="0.25" /> <polygon points="50,25 68,52 50,60" fill="currentColor" opacity="0.4" /> <polygon points="50,25 50,60 32,52" fill="currentColor" opacity="0.35" /> <polygon points="50,25 32,52 25,32" fill="currentColor" opacity="0.3" /> <polygon points="68,52 82,50 70,70" fill="currentColor" opacity="0.2" /> <polygon points="68,52 70,70 50,75" fill="currentColor" opacity="0.45" /> <polygon points="32,52 50,75 30,70" fill="currentColor" opacity="0.4" /> <polygon points="32,52 30,70 18,50" fill="currentColor" opacity="0.25" /> <polygon points="50,75 70,70 50,90" fill="currentColor" opacity="0.3" /> <polygon points="50,75 50,90 30,70" fill="currentColor" opacity="0.35" /> <circle cx="50" cy="50" r="2" fill="currentColor" opacity="0.6" /> <line x1="50" y1="25" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="68" y1="52" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="32" y1="52" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" /> <line x1="50" y1="75" x2="50" y2="50" stroke="currentColor" stroke-width="1.5" opacity="0.5" />
            </svg></button>
          </div>
          <p class="text-amber-200/70 text-sm mb-3 ml-10">Describe your surface-level personality in 5 words or less (e.g. shy, sarcastic, rude, aloof, hesitant).</p><input type="text" name="surface_personality" class="input-field w-full px-4 py-3 rounded-lg text-amber-100" placeholder="5 words or less..." data-track data-section-input="2" required>
         </div>
        </div><!-- Navigation Buttons -->
        <div class="flex justify-between gap-4 px-6 pb-6"><button type="button" onclick="previousSection()" class="nav-btn font-title-dice font-bold text-amber-950 px-8 py-3 rounded-lg tracking-wide uppercase"> ‚Üê Back to Details </button> <button type="button" onclick="nextSection()" class="nav-btn font-title-dice font-bold text-amber-950 px-8 py-3 rounded-lg tracking-wide uppercase"> Continue to Deep Questions ‚Üí </button>
        </div>
       </section><!-- Section 3: Deep Questions -->
       <section id="section-3" class="section-card rounded-lg overflow-hidden section-hidden" data-section="3">
        <div id="character-subtitle-3" class="character-subtitle text-center pt-6 font-title-dice"></div>
        <div class="category-header px-6 py-3">
         <h2 class="font-title-dice text-xl font-bold text-amber-400 tracking-wide flex items-center gap-3 justify-center"><span class="text-2xl">üß†</span> Section 3: Deep Questions</h2>
         <p class="text-amber-200/70 text-sm mt-1 text-center">Please answer at least one question from each category</p>
        </div>
        <div class="p-6 space-y-8"><!-- Core Identity -->
         <div class="space-y-4 category-locked" data-category-group="core_identity">
          <h3 class="font-title-dice text-lg text-amber-500 border-b border-amber-800/50 pb-2 flex items-center gap-2 category-header-title"><span>üó°Ô∏è</span> Core Identity</h3>
          <div class="space-y-4 pl-2 category-questions">
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">1</span> <label class="text-amber-200/90 text-sm">Who are you when no one is watching, and who do you pretend to be instead?</label>
            </div><textarea name="core_identity_1" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your true self vs. your mask..." data-track data-category="core_identity"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">2</span> <label class="text-amber-200/90 text-sm">What part of yourself are you most proud of?</label>
            </div><textarea name="core_identity_2" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your greatest strength..." data-track data-category="core_identity"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">3</span> <label class="text-amber-200/90 text-sm">What truth about you are you worried would impact how people see you if they knew it?</label>
            </div><textarea name="core_identity_3" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your hidden truth..." data-track data-category="core_identity"></textarea>
           </div>
          </div>
         </div><!-- Emotional Patterns -->
         <div class="space-y-4 category-locked" data-category-group="emotional">
          <h3 class="font-title-dice text-lg text-amber-500 border-b border-amber-800/50 pb-2 flex items-center gap-2 category-header-title"><span>üåä</span> Emotional Patterns</h3>
          <div class="space-y-4 pl-2 category-questions">
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">4</span> <label class="text-amber-200/90 text-sm">What emotion most often drives your decisions?</label>
            </div><textarea name="emotional_1" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="The feeling that guides you..." data-track data-category="emotional"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">5</span> <label class="text-amber-200/90 text-sm">How do you react when you feel trapped or powerless?</label>
            </div><textarea name="emotional_2" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your response to helplessness..." data-track data-category="emotional"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">6</span> <label class="text-amber-200/90 text-sm">What belief about the world guides you, even if it might be wrong?</label>
            </div><textarea name="emotional_3" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your core belief..." data-track data-category="emotional"></textarea>
           </div>
          </div>
         </div><!-- Past -->
         <div class="space-y-4 category-locked" data-category-group="past">
          <h3 class="font-title-dice text-lg text-amber-500 border-b border-amber-800/50 pb-2 flex items-center gap-2 category-header-title"><span>üìø</span> Past</h3>
          <div class="space-y-4 pl-2 category-questions">
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">7</span> <label class="text-amber-200/90 text-sm">What promise did you make that still affects your choices?</label>
            </div><textarea name="past_1" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="The promise that binds you..." data-track data-category="past"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">8</span> <label class="text-amber-200/90 text-sm">Who failed you when it mattered most, and how did that change you?</label>
            </div><textarea name="past_2" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="The betrayal that shaped you..." data-track data-category="past"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">9</span> <label class="text-amber-200/90 text-sm">What did you lose that you never truly recovered from?</label>
            </div><textarea name="past_3" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="The irreplaceable loss..." data-track data-category="past"></textarea>
           </div>
          </div>
         </div><!-- Relationships -->
         <div class="space-y-4 category-locked" data-category-group="relationships">
          <h3 class="font-title-dice text-lg text-amber-500 border-b border-amber-800/50 pb-2 flex items-center gap-2 category-header-title"><span>üë•</span> Relationships</h3>
          <div class="space-y-4 pl-2 category-questions">
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">10</span> <label class="text-amber-200/90 text-sm">Who from your past still has power over you?</label>
            </div><textarea name="relationships_1" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="The one who still controls..." data-track data-category="relationships"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">11</span> <label class="text-amber-200/90 text-sm">Who would you risk everything for, even if they do not deserve it?</label>
            </div><textarea name="relationships_2" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your unconditional loyalty..." data-track data-category="relationships"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">12</span> <label class="text-amber-200/90 text-sm">Who would be most affected if you disappeared tomorrow?</label>
            </div><textarea name="relationships_3" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="The one who needs you..." data-track data-category="relationships"></textarea>
           </div>
          </div>
         </div><!-- Morality -->
         <div class="space-y-4 category-locked" data-category-group="morality">
          <h3 class="font-title-dice text-lg text-amber-500 border-b border-amber-800/50 pb-2 flex items-center gap-2 category-header-title"><span>‚öñÔ∏è</span> Morality</h3>
          <div class="space-y-4 pl-2 category-questions">
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">13</span> <label class="text-amber-200/90 text-sm">What line will you never cross, no matter the cost?</label>
            </div><textarea name="morality_1" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your unbreakable rule..." data-track data-category="morality"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">14</span> <label class="text-amber-200/90 text-sm">What line have you already crossed and justified to yourself?</label>
            </div><textarea name="morality_2" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="The line you crossed..." data-track data-category="morality"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">15</span> <label class="text-amber-200/90 text-sm">What would make you turn against someone you love?</label>
            </div><textarea name="morality_3" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="The ultimate betrayal..." data-track data-category="morality"></textarea>
           </div>
          </div>
         </div><!-- Fears & Desires -->
         <div class="space-y-4 category-locked" data-category-group="fears_desires">
          <h3 class="font-title-dice text-lg text-amber-500 border-b border-amber-800/50 pb-2 flex items-center gap-2 category-header-title"><span>üî•</span> Fears &amp; Desires</h3>
          <div class="space-y-4 pl-2 category-questions">
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">16</span> <label class="text-amber-200/90 text-sm">What do you want more than anything else?</label>
            </div><textarea name="fears_desires_1" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your deepest desire..." data-track data-category="fears_desires"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">17</span> <label class="text-amber-200/90 text-sm">What do you secretly resent others for having or being able to do?</label>
            </div><textarea name="fears_desires_2" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your hidden envy..." data-track data-category="fears_desires"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">18</span> <label class="text-amber-200/90 text-sm">What are you most afraid of becoming?</label>
            </div><textarea name="fears_desires_3" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your nightmare self..." data-track data-category="fears_desires"></textarea>
           </div>
          </div>
         </div><!-- Daily Life -->
         <div class="space-y-4 category-locked" data-category-group="daily_life">
          <h3 class="font-title-dice text-lg text-amber-500 border-b border-amber-800/50 pb-2 flex items-center gap-2 category-header-title"><span>üç∫</span> Daily Life</h3>
          <div class="space-y-4 pl-2 category-questions">
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">19</span> <label class="text-amber-200/90 text-sm">What is your favourite food, and when do you usually eat it?</label>
            </div><textarea name="daily_life_1" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your comfort meal..." data-track data-category="daily_life"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">20</span> <label class="text-amber-200/90 text-sm">What personal item do you keep within reach at all times, and why?</label>
            </div><textarea name="daily_life_2" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your treasured possession..." data-track data-category="daily_life"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">21</span> <label class="text-amber-200/90 text-sm">What smell, taste, or texture instantly brings back a memory?</label>
            </div><textarea name="daily_life_3" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your sensory trigger..." data-track data-category="daily_life"></textarea>
           </div>
          </div>
         </div><!-- Style & Presence -->
         <div class="space-y-4 category-locked" data-category-group="style">
          <h3 class="font-title-dice text-lg text-amber-500 border-b border-amber-800/50 pb-2 flex items-center gap-2 category-header-title"><span>üõ°Ô∏è</span> Style &amp; Presence</h3>
          <div class="space-y-4 pl-2 category-questions">
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">22</span> <label class="text-amber-200/90 text-sm">How do you treat your armour and gear - e.g. meticulously, carelessly, ritualistically?</label>
            </div><textarea name="style_1" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your equipment habits..." data-track data-category="style"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">23</span> <label class="text-amber-200/90 text-sm">What detail of your appearance do you maintain carefully, and what do you neglect?</label>
            </div><textarea name="style_2" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your grooming priorities..." data-track data-category="style"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">24</span> <label class="text-amber-200/90 text-sm">How do you physically carry yourself - e.g. confident, guarded, slouched, precise, restless?</label>
            </div><textarea name="style_3" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your physical presence..." data-track data-category="style"></textarea>
           </div>
          </div>
         </div><!-- Speech & Mannerisms -->
         <div class="space-y-4 category-locked" data-category-group="speech">
          <h3 class="font-title-dice text-lg text-amber-500 border-b border-amber-800/50 pb-2 flex items-center gap-2 category-header-title"><span>üí¨</span> Speech &amp; Mannerisms</h3>
          <div class="space-y-4 pl-2 category-questions">
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">25</span> <label class="text-amber-200/90 text-sm">How do you speak most of the time?</label>
            </div><textarea name="speech_1" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your speaking style..." data-track data-category="speech"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">26</span> <label class="text-amber-200/90 text-sm">What verbal habit do you fall into under stress - e.g. swearing, silence, jokes?</label>
            </div><textarea name="speech_2" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your stress response..." data-track data-category="speech"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">27</span> <label class="text-amber-200/90 text-sm">What physical tell gives you away when you are lying or hiding something?</label>
            </div><textarea name="speech_3" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="Your tell..." data-track data-category="speech"></textarea>
           </div>
          </div>
         </div><!-- Secrets -->
         <div class="space-y-4 category-locked" data-category-group="secrets">
          <h3 class="font-title-dice text-lg text-amber-500 border-b border-amber-800/50 pb-2 flex items-center gap-2 category-header-title"><span>üîí</span> Secrets</h3>
          <div class="space-y-4 pl-2 category-questions">
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">28</span> <label class="text-amber-200/90 text-sm">What secret are you actively hiding right now?</label>
            </div><textarea name="secrets_1" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="The secret you guard..." data-track data-category="secrets"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">29</span> <label class="text-amber-200/90 text-sm">Who from your past could reappear and upend your life?</label>
            </div><textarea name="secrets_2" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="The ghost from your past..." data-track data-category="secrets"></textarea>
           </div>
           <div>
            <div class="flex items-start gap-3 mb-2"><span class="question-number rounded-full flex items-center justify-center text-xs font-bold text-amber-950">30</span> <label class="text-amber-200/90 text-sm">What unfinished business will not stay buried?</label>
            </div><textarea name="secrets_3" rows="2" class="input-field w-full px-4 py-3 rounded-lg text-amber-100 resize-none text-sm" placeholder="What haunts you..." data-track data-category="secrets"></textarea>
           </div>
          </div>
         </div>
        </div><!-- Navigation Buttons -->
        <div class="flex justify-between gap-4 px-6 pb-6"><button type="button" onclick="previousSection()" class="nav-btn font-title-dice font-bold text-amber-950 px-8 py-3 rounded-lg tracking-wide uppercase"> ‚Üê Back to Backstory </button> <button type="submit" class="submit-btn font-title-dice font-bold text-amber-950 px-12 py-4 rounded-lg tracking-wide uppercase text-lg shadow-lg"> üìú Make It Canon üìú </button>
        </div>
       </section>
      </form><!-- Summary Page (hidden by default) -->
      <div id="summary-page" class="hidden summary-page">
       <div class="section-card rounded-lg p-10 max-w-4xl mx-auto">
        <div class="text-center mb-8">
         <div class="text-5xl mb-4">
          üé≠
         </div>
         <h1 id="summary-character-name" class="font-title-dice text-4xl text-amber-400 mb-2"></h1>
         <p class="text-amber-500 text-lg font-title-dice">Character Summary</p>
         <div class="ornament w-48 mx-auto mt-4"></div>
        </div>
        <div id="summary-content" class="space-y-6 text-amber-100"></div>
        <div class="flex justify-center gap-4 mt-10 no-print"><button onclick="showNextSteps()" class="submit-btn font-title-dice font-bold text-amber-950 px-10 py-4 rounded-lg tracking-wide uppercase text-lg shadow-2xl animate-pulse" style="box-shadow: 0 0 30px rgba(201, 169, 89, 0.8), 0 0 60px rgba(201, 169, 89, 0.4);"> The Road Forward </button> <button onclick="createAnother()" class="nav-btn font-title-dice font-bold text-amber-950 px-8 py-3 rounded-lg tracking-wide uppercase"> Create Another Character </button>
        </div>
       </div>
      </div>
     </main><!-- Confirmation Modal -->
     <div id="confirmation-modal" class="hidden modal-overlay">
      <div class="modal-content section-card rounded-lg p-8 max-w-md mx-4">
       <div class="text-center">
        <div class="text-5xl mb-4">
         üìú
        </div>
        <h2 class="font-title-dice text-2xl text-amber-400 mb-4">Make It Canon?</h2>
        <p class="text-amber-200/90 mb-6">Are you sure you're ready to forge this character's legend? Once canon, their story becomes eternal.</p>
        <div class="flex justify-center gap-4"><button onclick="cancelSubmit()" class="nav-btn font-title-dice font-bold text-amber-950 px-6 py-3 rounded-lg tracking-wide uppercase"> Not Yet </button> <button onclick="confirmSubmit()" class="submit-btn font-title-dice font-bold text-amber-950 px-8 py-3 rounded-lg tracking-wide uppercase"> Yes, Make It Canon! </button>
        </div>
       </div>
      </div>
     </div><!-- Next Steps Modal -->
     <div id="next-steps-modal" class="hidden modal-overlay">
      <div class="modal-content section-card rounded-lg p-8 max-w-lg mx-4">
       <div class="text-center">
        <div class="text-5xl mb-4">
         ‚ú®
        </div>
        <h2 class="font-title-dice text-2xl text-amber-400 mb-4">Your Character Awaits!</h2>
        <div class="text-left text-amber-200/90 mb-6 space-y-4">
         <p class="font-semibold text-amber-300">Follow these steps to complete your submission:</p>
         <ol class="list-decimal list-inside space-y-2 text-sm">
          <li>Select and copy all the text from your character summary above</li>
          <li>Click the button below to open the submission form</li>
          <li>Paste your character summary into the form</li>
          <li>Submit and await your adventure!</li>
         </ol>
        </div>
        <div class="flex flex-col gap-3"><a href="https://forms.gle/DSPrHvTZn64V4M6y7" target="_blank" rel="noopener noreferrer" class="submit-btn font-title-dice font-bold text-amber-950 px-8 py-3 rounded-lg tracking-wide uppercase block text-center"> Make Your DM Happy </a> <button onclick="closeNextSteps()" class="nav-btn font-title-dice font-bold text-amber-950 px-6 py-3 rounded-lg tracking-wide uppercase"> Back to Summary </button>
        </div>
       </div>
      </div>
     </div><!-- Footer -->
     <footer class="border-t border-amber-900/30 py-8 text-center">
      <p class="text-amber-700/60 text-sm font-title-dice italic mb-2">"You Have The Right To Remain Silent. Anything You Say Can And Will Be Used Against You In The Adventure."</p>
      <p class="text-amber-600/80 text-base font-title-dice tracking-wide">‚Äî Dungeon Master Rae</p>
     </footer>
    </div>
   </div>
  </div>
  <button id="scroll-to-top" class="scroll-to-top no-print" type="button" aria-label="Scroll to top">
   <svg class="w-5 h-5" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <path d="M12 5l-7 7m7-7l7 7M12 5v14" stroke-linecap="round" stroke-linejoin="round"></path>
   </svg>
  </button>
  <script>
    let currentSection = 1;
    let completedSections = [];
    let lastDirection = 'forward';

    const appContainer = document.getElementById('app-container');
    const scrollToTopBtn = document.getElementById('scroll-to-top');

    function updateScrollToTopVisibility() {
      if (!appContainer || !scrollToTopBtn) return;
      const shouldShow = appContainer.scrollTop > 200;
      scrollToTopBtn.classList.toggle('is-visible', shouldShow);
    }

    if (appContainer && scrollToTopBtn) {
      appContainer.addEventListener('scroll', updateScrollToTopVisibility);
      scrollToTopBtn.addEventListener('click', () => {
        appContainer.scrollTo({ top: 0, behavior: 'smooth' });
      });
      updateScrollToTopVisibility();
    }

    // Navigation between home and activity
    function startBeforeDice() {
      document.getElementById('home-screen').classList.add('hidden');
      document.getElementById('before-dice-screen').classList.remove('hidden');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function returnToHome() {
      document.getElementById('before-dice-screen').classList.add('hidden');
      document.getElementById('home-screen').classList.remove('hidden');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function showComingSoon(featureName) {
      const modal = document.getElementById('coming-soon-modal');
      const title = document.getElementById('coming-soon-title');
      const message = document.getElementById('coming-soon-message');
      
      title.textContent = 'COMING SOON';
      message.textContent = `${featureName} is currently under development`;
      
      modal.classList.remove('hidden');
    }

    function hideComingSoon() {
      document.getElementById('coming-soon-modal').classList.add('hidden');
    }

    // Progress tracking
    function updateProgress() {
      const form = document.getElementById('character-form');
      
      const section1Inputs = form.querySelectorAll('[data-section-input="1"]');
      const section2Inputs = form.querySelectorAll('[data-section-input="2"]');
      
      let section1Filled = 0;
      section1Inputs.forEach(input => {
        if (input.value.trim()) section1Filled++;
      });
      
      let section2Filled = 0;
      section2Inputs.forEach(input => {
        if (input.value.trim()) section2Filled++;
      });
      
      const categories = ['core_identity', 'emotional', 'past', 'relationships', 'morality', 'fears_desires', 'daily_life', 'style', 'speech', 'secrets'];
      let section3Filled = 0;
      
      categories.forEach(cat => {
        const inputs = document.querySelectorAll(`[data-category="${cat}"]`);
        let hasAnswer = false;
        inputs.forEach(input => {
          if (input.value.trim()) hasAnswer = true;
        });
        if (hasAnswer) section3Filled++;
      });
      
      const totalRequired = section1Inputs.length + section2Inputs.length + categories.length;
      const totalFilled = section1Filled + section2Filled + section3Filled;
      
      const percentage = Math.round((totalFilled / totalRequired) * 100);
      document.getElementById('progress-bar').style.width = percentage + '%';
      document.getElementById('progress-text').textContent = percentage + '% Complete';
    }

    function updateCharacterSubtitle() {
      const characterName = document.getElementById('character_name').value.trim();
      
      for (let i = 1; i <= 3; i++) {
        const subtitle = document.getElementById(`character-subtitle-${i}`);
        if (characterName) {
          subtitle.textContent = `‚Äî ${characterName} ‚Äî`;
          subtitle.classList.add('visible');
        } else {
          subtitle.textContent = '';
          subtitle.classList.remove('visible');
        }
      }
    }

    function updateSectionDots() {
      for (let i = 1; i <= 3; i++) {
        const dot = document.querySelector(`[data-section-dot="${i}"]`);
        dot.classList.remove('active', 'completed');
        
        if (i === currentSection) {
          dot.classList.add('active');
        } else if (completedSections.includes(i)) {
          dot.classList.add('completed');
        }
      }
      document.getElementById('current-section-number').textContent = currentSection;
    }

    function checkSectionComplete(sectionNum) {
      const inputs = document.querySelectorAll(`[data-section-input="${sectionNum}"]`);
      let allFilled = true;
      
      inputs.forEach(input => {
        if (!input.value.trim()) {
          allFilled = false;
        }
      });
      
      return allFilled;
    }

    function validateCategories() {
      const categories = ['core_identity', 'emotional', 'past', 'relationships', 'morality', 'fears_desires', 'daily_life', 'style', 'speech', 'secrets'];
      const missing = [];
      
      categories.forEach(cat => {
        const inputs = document.querySelectorAll(`[data-category="${cat}"]`);
        let hasAnswer = false;
        inputs.forEach(input => {
          if (input.value.trim()) hasAnswer = true;
        });
        if (!hasAnswer) {
          const categoryNames = {
            'core_identity': 'Core Identity',
            'emotional': 'Emotional Patterns',
            'past': 'Past',
            'relationships': 'Relationships',
            'morality': 'Morality',
            'fears_desires': 'Fears & Desires',
            'daily_life': 'Daily Life',
            'style': 'Style & Presence',
            'speech': 'Speech & Mannerisms',
            'secrets': 'Secrets'
          };
          missing.push(categoryNames[cat]);
        }
      });
      
      return missing;
    }

    function showValidationMessage(message, missing = null) {
      const existingMsg = document.getElementById('validation-message');
      if (existingMsg) existingMsg.remove();
      
      const msgDiv = document.createElement('div');
      msgDiv.id = 'validation-message';
      msgDiv.className = 'section-card rounded-lg p-4';
      msgDiv.style.position = 'fixed';
      msgDiv.style.bottom = '1rem';
      msgDiv.style.left = '1rem';
      msgDiv.style.right = '1rem';
      msgDiv.style.zIndex = '9999';
      msgDiv.style.maxWidth = '90vw';
      msgDiv.style.margin = '0 auto';
      
      if (window.innerWidth >= 768) {
        msgDiv.style.left = 'auto';
        msgDiv.style.right = '1rem';
        msgDiv.style.width = '24rem';
        msgDiv.style.maxWidth = '24rem';
      }
      
      if (missing) {
        msgDiv.innerHTML = `
          <div class="flex items-start gap-3">
            <span class="text-2xl">‚ö†Ô∏è</span>
            <div>
              <p class="text-amber-400 font-semibold mb-2">${message}</p>
              <ul class="text-amber-200/80 text-sm space-y-1">
                ${missing.map(cat => `<li>‚Ä¢ ${cat}</li>`).join('')}
              </ul>
            </div>
            <button onclick="this.parentElement.parentElement.remove()" class="text-amber-600 hover:text-amber-400 ml-auto">‚úï</button>
          </div>
        `;
      } else {
        msgDiv.innerHTML = `
          <div class="flex items-start gap-3">
            <span class="text-2xl">‚ö†Ô∏è</span>
            <div>
              <p class="text-amber-400 font-semibold">${message}</p>
            </div>
            <button onclick="this.parentElement.parentElement.remove()" class="text-amber-600 hover:text-amber-400 ml-auto">‚úï</button>
          </div>
        `;
      }
      
      document.body.appendChild(msgDiv);
      
      setTimeout(() => {
        if (document.getElementById('validation-message')) {
          document.getElementById('validation-message').remove();
        }
      }, 5000);
    }

    function showSection(sectionNum, direction = 'forward') {
      for (let i = 1; i <= 3; i++) {
        const section = document.getElementById(`section-${i}`);
        section.classList.add('section-hidden');
      }
      
      const targetSection = document.getElementById(`section-${sectionNum}`);
      targetSection.classList.remove('section-hidden');
      targetSection.classList.remove('slide-in-right', 'slide-in-left');
      
      if (direction === 'forward') {
        targetSection.classList.add('slide-in-right');
      } else {
        targetSection.classList.add('slide-in-left');
      }
      
      currentSection = sectionNum;
      updateSectionDots();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function nextSection() {
      if (!checkSectionComplete(currentSection)) {
        showValidationMessage('Please fill in all fields before continuing to the next section.');
        return;
      }
      
      if (!completedSections.includes(currentSection)) {
        completedSections.push(currentSection);
      }
      
      if (currentSection < 3) {
        showSection(currentSection + 1, 'forward');
      }
    }

    function previousSection() {
      if (currentSection > 1) {
        showSection(currentSection - 1, 'back');
      }
    }

    function navigateToSection(sectionNum) {
      if (sectionNum > currentSection) {
        for (let i = currentSection; i < sectionNum; i++) {
          if (!completedSections.includes(i)) {
            showValidationMessage(`Please complete Section ${i} before jumping ahead.`);
            return;
          }
        }
      }
      
      const direction = sectionNum > currentSection ? 'forward' : 'back';
      showSection(sectionNum, direction);
    }

    function generateSummary() {
      const formData = new FormData(document.getElementById('character-form'));
      const data = {};
      for (let [key, value] of formData.entries()) {
        data[key] = value;
      }

      const characterName = data.character_name || 'Unknown Hero';
      document.getElementById('summary-character-name').textContent = characterName;

      let summaryHTML = '';

      summaryHTML += `
        <div class="mb-6">
          <h3 class="font-title-dice text-xl text-amber-500 border-b border-amber-800/50 pb-2 mb-3">Character Details</h3>
          <div class="space-y-2 text-sm">
            <p><span class="text-amber-400 font-semibold">Player Name:</span> ${data.player_name || 'N/A'}</p>
            <p><span class="text-amber-400 font-semibold">Character Name:</span> ${data.character_name || 'N/A'}</p>
            <p><span class="text-amber-400 font-semibold">Race:</span> ${data.character_race || 'N/A'}</p>
            <p><span class="text-amber-400 font-semibold">Class:</span> ${data.character_class || 'N/A'}</p>
            <p><span class="text-amber-400 font-semibold">Age:</span> ${data.character_age || 'N/A'}</p>
          </div>
        </div>
      `;

      summaryHTML += `
        <div class="mb-6">
          <h3 class="font-title-dice text-xl text-amber-500 border-b border-amber-800/50 pb-2 mb-3">Backstory</h3>
          <div class="space-y-3 text-sm">
            <div>
              <p class="text-amber-400 font-semibold mb-1">Where You Came From:</p>
              <p class="text-amber-200/80">${data.backstory_origin || 'N/A'}</p>
            </div>
            <div>
              <p class="text-amber-400 font-semibold mb-1">Significant Events:</p>
              <p class="text-amber-200/80">${data.backstory_events || 'N/A'}</p>
            </div>
            <div>
              <p class="text-amber-400 font-semibold mb-1">Where You Were Before This:</p>
              <p class="text-amber-200/80">${data.backstory_recent || 'N/A'}</p>
            </div>
            <div>
              <p class="text-amber-400 font-semibold mb-1">Surface Personality:</p>
              <p class="text-amber-200/80">${data.surface_personality || 'N/A'}</p>
            </div>
          </div>
        </div>
      `;

      summaryHTML += `
        <div class="mb-6">
          <h3 class="font-title-dice text-xl text-amber-500 border-b border-amber-800/50 pb-2 mb-3">Deep Questions</h3>
          <div class="space-y-4 text-sm">
      `;

      const categories = [
        { key: 'core_identity', title: 'üó°Ô∏è Core Identity', fields: ['core_identity_1', 'core_identity_2', 'core_identity_3'] },
        { key: 'emotional', title: 'üåä Emotional Patterns', fields: ['emotional_1', 'emotional_2', 'emotional_3'] },
        { key: 'past', title: 'üìø Past', fields: ['past_1', 'past_2', 'past_3'] },
        { key: 'relationships', title: 'üë• Relationships', fields: ['relationships_1', 'relationships_2', 'relationships_3'] },
        { key: 'morality', title: '‚öñÔ∏è Morality', fields: ['morality_1', 'morality_2', 'morality_3'] },
        { key: 'fears_desires', title: 'üî• Fears & Desires', fields: ['fears_desires_1', 'fears_desires_2', 'fears_desires_3'] },
        { key: 'daily_life', title: 'üç∫ Daily Life', fields: ['daily_life_1', 'daily_life_2', 'daily_life_3'] },
        { key: 'style', title: 'üõ°Ô∏è Style & Presence', fields: ['style_1', 'style_2', 'style_3'] },
        { key: 'speech', title: 'üí¨ Speech & Mannerisms', fields: ['speech_1', 'speech_2', 'speech_3'] },
        { key: 'secrets', title: 'üîí Secrets', fields: ['secrets_1', 'secrets_2', 'secrets_3'] }
      ];

      categories.forEach(category => {
        const hasAnswers = category.fields.some(field => data[field] && data[field].trim());
        if (hasAnswers) {
          summaryHTML += `
            <div>
              <p class="text-amber-400 font-semibold mb-2">${category.title}</p>
              <div class="space-y-2 ml-4">
          `;
          category.fields.forEach((field, index) => {
            if (data[field] && data[field].trim()) {
              const questionNumbers = {
                'core_identity': [1, 2, 3],
                'emotional': [4, 5, 6],
                'past': [7, 8, 9],
                'relationships': [10, 11, 12],
                'morality': [13, 14, 15],
                'fears_desires': [16, 17, 18],
                'daily_life': [19, 20, 21],
                'style': [22, 23, 24],
                'speech': [25, 26, 27],
                'secrets': [28, 29, 30]
              };
              summaryHTML += `
                <div>
                  <p class="text-amber-300 text-xs">Question ${questionNumbers[category.key][index]}:</p>
                  <p class="text-amber-200/80">${data[field]}</p>
                </div>
              `;
            }
          });
          summaryHTML += `
              </div>
            </div>
          `;
        }
      });

      summaryHTML += `
          </div>
        </div>
      `;

      document.getElementById('summary-content').innerHTML = summaryHTML;
    }

    function showSummary() {
      generateSummary();
      document.getElementById('character-form').classList.add('hidden');
      document.getElementById('summary-page').classList.remove('hidden');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function showNextSteps() {
      document.getElementById('next-steps-modal').classList.remove('hidden');
    }

    function closeNextSteps() {
      document.getElementById('next-steps-modal').classList.add('hidden');
    }

    function createAnother() {
      document.getElementById('character-form').reset();
      document.getElementById('character-form').classList.remove('hidden');
      document.getElementById('summary-page').classList.add('hidden');
      currentSection = 1;
      completedSections = [];
      showSection(1, 'forward');
      updateProgress();
      updateCharacterSubtitle();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function cancelSubmit() {
      document.getElementById('confirmation-modal').classList.add('hidden');
    }

    function confirmSubmit() {
      document.getElementById('confirmation-modal').classList.add('hidden');
      showSummary();
    }

    document.getElementById('character-form').addEventListener('submit', function(e) {
      e.preventDefault();
      
      if (!checkSectionComplete(1)) {
        showValidationMessage('Please complete all fields in Section 1 (Details) before submitting.');
        navigateToSection(1);
        return;
      }
      
      if (!checkSectionComplete(2)) {
        showValidationMessage('Please complete all fields in Section 2 (Backstory) before submitting.');
        navigateToSection(2);
        return;
      }
      
      const missing = validateCategories();
      if (missing.length > 0) {
        showValidationMessage('Please answer at least one question from each category:', missing);
        return;
      }
      
      document.getElementById('confirmation-modal').classList.remove('hidden');
    });

    const raceComments = {
      'aasimar': 'Ah yes. Burdened by destiny, glowing expectations, and the assumption you\'re morally correct.',
      'changeling': 'You couldn\'t commit to one identity, so you chose all of them. Concerning. Interesting.',
      'dragonborn': 'You wanted presence. Volume. Possibly fire. We noticed.',
      'dwarf': 'You trust tradition, stone, and grudges that last longer than kingdoms.',
      'elf': 'You picked elegance, trauma, and a lifespan long enough to watch everyone else make mistakes.',
      'fairy': 'You look harmless. This is a lie.',
      'genasi': 'You wanted elemental vibes without fully committing to chaos. Respectable. Suspicious.',
      'githyanki': 'You read the lore and thought, \'Yes. This is my problem now.\'',
      'gnome': 'You are either underestimated or deeply annoying. Possibly both.',
      'halfling': 'You chose comfort, resilience, and the quiet confidence of someone who will survive everyone else.',
      'human': 'Bold choice. Really went off-script there.',
      'orc': 'You\'re here to challenge assumptions, including your own.',
      'tiefling': 'You like being judged on sight and are absolutely prepared to lean into it.'
    };

    const classComments = {
      'artificer': 'You believe every problem is solvable with preparation, tinkering, and just one more upgrade. You are wrong, but confidently.',
      'barbarian': 'You replaced introspection with rage and called it a coping strategy.',
      'bard': 'You are here to be liked, admired, and occasionally arrested.',
      'cleric': 'You say it\'s faith. Everyone else hears \'pressure.\'',
      'druid': 'You absolutely judge cities. Out loud. Sometimes silently. Always.',
      'fighter': 'You chose reliability in a world of drama. Somehow, that is your drama.',
      'monk': 'You took \'control yourself\' as a personal challenge and now nobody knows what you\'re feeling. Including you.',
      'paladin': 'You woke up today ready to be disappointed in someone.',
      'ranger': 'You prefer distance. From civilisation. From feelings. From group discussions.',
      'rogue': 'You are not untrustworthy. You are just very selectively honest.',
      'sorcerer': 'You have power, vibes, and no memory of earning either.',
      'warlock': 'You made a bad deal and immediately decided it was a personality trait.',
      'wizard': 'You think knowledge is power and sleep is optional. It shows.'
    };

    document.getElementById('character_race').addEventListener('change', function(e) {
      const commentEl = document.getElementById('race-comment');
      const selectedRace = e.target.value;
      
      if (selectedRace && raceComments[selectedRace]) {
        commentEl.textContent = raceComments[selectedRace];
        commentEl.style.opacity = '0';
        setTimeout(() => {
          commentEl.style.transition = 'opacity 0.5s ease-in';
          commentEl.style.opacity = '1';
        }, 50);
      } else {
        commentEl.textContent = '';
      }
    });

    document.getElementById('character_class').addEventListener('change', function(e) {
      const commentEl = document.getElementById('class-comment');
      const selectedClass = e.target.value;
      
      if (selectedClass && classComments[selectedClass]) {
        commentEl.textContent = classComments[selectedClass];
        commentEl.style.opacity = '0';
        setTimeout(() => {
          commentEl.style.transition = 'opacity 0.5s ease-in';
          commentEl.style.opacity = '1';
        }, 50);
      } else {
        commentEl.textContent = '';
      }
    });

    document.getElementById('character_age').addEventListener('input', function(e) {
      const commentEl = document.getElementById('age-comment');
      const age = e.target.value.trim();
      
      if (age === '69') {
        commentEl.textContent = '...really?! Grow up.';
        commentEl.style.opacity = '0';
        setTimeout(() => {
          commentEl.style.transition = 'opacity 0.5s ease-in';
          commentEl.style.opacity = '1';
        }, 50);
      } else {
        commentEl.textContent = '';
      }
    });

    document.getElementById('character_name').addEventListener('input', function() {
      updateCharacterSubtitle();
      updateProgress();
    });

    function generateRandomName() {
      const firstNames = [
        'Aldric', 'Brynn', 'Cedric', 'Draven', 'Elowen', 'Fenwick', 'Gareth', 'Haldor',
        'Isolde', 'Jareth', 'Kaelen', 'Lysander', 'Morgana', 'Nyx', 'Oswin', 'Percival',
        'Quinlan', 'Rowena', 'Silas', 'Theron', 'Ulric', 'Vespera', 'Wulfric', 'Xanthe',
        'Ysara', 'Zephyr'
      ];
      
      const lastNames = [
        'Blackwood', 'Ironforge', 'Stormwind', 'Shadowmere', 'Brightblade', 'Darkholme', 'Moonwhisper', 'Flameheart',
        'Frostborn', 'Thorngage', 'Silverleaf', 'Goldspire', 'Ravencrest', 'Wolfsbane', 'Dragonsbane', 'Starweaver',
        'Ashenmoor', 'Stonehelm', 'Nightshade', 'Sunfire'
      ];
      
      const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
      const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
      const fullName = `${firstName} ${lastName}`;
      
      const diceBtn = document.getElementById('dice-btn');
      const nameInput = document.getElementById('character_name');
      
      diceBtn.classList.add('spinning');
      
      setTimeout(() => {
        nameInput.value = fullName;
        updateProgress();
        updateCharacterSubtitle();
        diceBtn.classList.remove('spinning');
      }, 600);
    }

    function generateRandomOrigin() {
      const origins = [
        "I grew up in a bustling port city with my merchant family. The streets were alive with travellers from every corner of the realm, and I learned to read people before I could read books. What felt normal was the constant noise and negotiation. What never felt right was the way my family valued coin over connection.",
        "I was raised in a remote monastery high in the mountains. My days were filled with meditation, training, and silence. The discipline and routine felt natural to me. What never felt right was the isolation from the world below, the sense that all our enlightenment meant nothing if we never shared it."
      ];
      
      const randomOrigin = origins[Math.floor(Math.random() * origins.length)];
      const originInput = document.getElementById('backstory_origin');
      
      originInput.value = randomOrigin;
      updateProgress();
    }

    function showNiceMessage(questionNum) {
      showValidationMessage("Nice try, you're not getting out of this that easily!");
    }

    document.querySelectorAll('[data-track]').forEach(input => {
      input.addEventListener('input', updateProgress);
    });

    function checkCategoryUnlock() {
      const categories = ['core_identity', 'emotional', 'past', 'relationships', 'morality', 'fears_desires', 'daily_life', 'style', 'speech', 'secrets'];
      
      let previousCategoryAnswered = true;
      
      categories.forEach((category, index) => {
        const categoryGroup = document.querySelector(`[data-category-group="${category}"]`);
        if (!categoryGroup) return;
        
        const inputs = categoryGroup.querySelectorAll(`[data-category="${category}"]`);
        let currentCategoryHasAnswer = false;
        
        inputs.forEach(input => {
          if (input.value.trim()) {
            currentCategoryHasAnswer = true;
          }
        });
        
        if (index === 0) {
          categoryGroup.classList.remove('category-locked');
        } else if (previousCategoryAnswered) {
          categoryGroup.classList.remove('category-locked');
        } else {
          categoryGroup.classList.add('category-locked');
        }
        
        if (currentCategoryHasAnswer) {
          previousCategoryAnswered = true;
        } else {
          previousCategoryAnswered = false;
        }
      });
    }
    
    document.querySelectorAll('[data-category]').forEach(input => {
      input.addEventListener('input', () => {
        updateProgress();
        checkCategoryUnlock();
      });
    });

    // Initialize on page load
    updateProgress();
    updateSectionDots();
    checkCategoryUnlock();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9bb37232574e29c5',t:'MTc2Nzk1NjU4NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>




